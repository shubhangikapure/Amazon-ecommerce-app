{"ast":null,"code":"import _toConsumableArray from\"C:/Users/planet/Downloads/ecommerce-project-react-main/ecommerce-project-react-main/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/planet/Downloads/ecommerce-project-react-main/ecommerce-project-react-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{addToDb,getStoredCart}from'../../utilities/fakedb';import Cart from'../Cart/Cart';import Product from'../Product/Product';import\"./Shop.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Shop=function Shop(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),cart=_useState4[0],setCart=_useState4[1];useEffect(function(){fetch(\"./products.json\").then(function(res){return res.json();}).then(function(data){return setProducts(data);});},[]);useEffect(function(){var savedCart=getStoredCart();var savedProducts=[];if(products.length){var _loop=function _loop(key){var quantity=savedCart[key];var savedProduct=products.find(function(product){return product.key===key;});if(savedProduct){savedProduct.quantity=quantity;savedProducts.push(savedProduct);}setCart(savedProducts);};for(var key in savedCart){_loop(key);}}},[products]);var handleAddToCart=function handleAddToCart(product){var checkAlreadyAdded=cart.find(function(addedProduct){return product.key===addedProduct.key;});if(!checkAlreadyAdded){product.quantity=1;var newCart=[].concat(_toConsumableArray(cart),[product]);setCart(newCart);addToDb(product.key);}else{checkAlreadyAdded[\"quantity\"]+=1;var updatedCart=_toConsumableArray(cart);setCart(updatedCart);addToDb(product.key);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"shop-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-container\",children:products.map(function(product){return/*#__PURE__*/_jsx(Product,{product:product,handleAddToCart:handleAddToCart},product.key);})}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-container\",children:/*#__PURE__*/_jsx(Cart,{cart:cart})})]});};export default Shop;","map":{"version":3,"names":["React","useEffect","useState","addToDb","getStoredCart","Cart","Product","jsx","_jsx","jsxs","_jsxs","Shop","_useState","_useState2","_slicedToArray","products","setProducts","_useState3","_useState4","cart","setCart","fetch","then","res","json","data","savedCart","savedProducts","length","_loop","key","quantity","savedProduct","find","product","push","handleAddToCart","checkAlreadyAdded","addedProduct","newCart","concat","_toConsumableArray","updatedCart","className","children","map"],"sources":["C:/Users/planet/Downloads/ecommerce-project-react-main/ecommerce-project-react-main/src/Components/Shop/Shop.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { addToDb, getStoredCart } from '../../utilities/fakedb';\nimport Cart from '../Cart/Cart';\nimport Product from '../Product/Product';\nimport \"./Shop.css\";\n\nconst Shop = () => {\n    const [products, setProducts] = useState([]);\n    const [cart, setCart] = useState([]);\n\n    useEffect(()=>{\n        fetch(\"./products.json\")\n        .then(res => res.json())\n        .then(data =>setProducts(data));\n    },[]);\n\n    useEffect(() => {\n        const savedCart = getStoredCart();\n        const savedProducts = [];\n        if(products.length){\n            for (const key in savedCart) {\n                const quantity = savedCart[key]\n                const savedProduct = products.find(product => product.key === key);\n                if(savedProduct){\n                    savedProduct.quantity = quantity;\n                    savedProducts.push(savedProduct);\n                }\n                setCart(savedProducts);\n            }\n        }\n    },[products]);\n\n    const handleAddToCart = (product) =>{\n        const checkAlreadyAdded = cart.find(addedProduct => product.key === addedProduct.key);\n        if(!checkAlreadyAdded){\n            product.quantity = 1;\n            const newCart = [...cart, product];\n            setCart(newCart);\n            addToDb(product.key);\n        } else {\n            checkAlreadyAdded[\"quantity\"] += 1;\n            const updatedCart = [...cart];\n            setCart(updatedCart);\n            addToDb(product.key);\n        }\n    }\n\n    return (\n        <div className=\"shop-container\">\n            <div className=\"product-container\">\n                {\n                    products.map(product => <Product key={product.key} product={product} handleAddToCart={handleAddToCart}></Product>)\n                }\n            </div>\n            <div className=\"cart-container\">\n                <Cart cart = {cart}></Cart>\n            </div>\n        </div>\n    );\n};\n\nexport default Shop;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}